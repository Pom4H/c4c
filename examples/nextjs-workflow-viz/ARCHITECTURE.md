# Architecture Overview

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Browser (Client)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚          Page Component (page.tsx)                 â”‚     â”‚
â”‚  â”‚  - Workflow selection                              â”‚     â”‚
â”‚  â”‚  - Execute button                                  â”‚     â”‚
â”‚  â”‚  - Tab navigation                                  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚              â”‚                                               â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚       â–¼             â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚ WorkflowVisualizer â”‚  TraceViewer â”‚                      â”‚
â”‚  â”‚                    â”‚             â”‚                        â”‚
â”‚  â”‚ - React Flow       â”‚  - Timeline â”‚                       â”‚
â”‚  â”‚ - Node rendering   â”‚  - Spans    â”‚                       â”‚
â”‚  â”‚ - Animation        â”‚  - Details  â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚              â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Server Action Call
               â”‚ executeWorkflowAction(id)
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Next.js Server                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         Server Actions (actions.ts)                â”‚     â”‚
â”‚  â”‚  - executeWorkflowAction()                         â”‚     â”‚
â”‚  â”‚  - getAvailableWorkflows()                         â”‚     â”‚
â”‚  â”‚  - getWorkflowDefinition()                         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚              â”‚                                               â”‚
â”‚              â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚      Workflow Runtime (runtime.ts)                 â”‚     â”‚
â”‚  â”‚                                                     â”‚     â”‚
â”‚  â”‚  executeWorkflow()                                 â”‚     â”‚
â”‚  â”‚    â”œâ”€â†’ TraceCollector (OpenTelemetry)             â”‚     â”‚
â”‚  â”‚    â”œâ”€â†’ executeNode() for each node                â”‚     â”‚
â”‚  â”‚    â”‚    â”œâ”€â†’ executeProcedureNode()                â”‚     â”‚
â”‚  â”‚    â”‚    â”œâ”€â†’ executeConditionNode()                â”‚     â”‚
â”‚  â”‚    â”‚    â””â”€â†’ executeParallelNode()                 â”‚     â”‚
â”‚  â”‚    â””â”€â†’ Collect spans & results                    â”‚     â”‚
â”‚  â”‚                                                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚              â”‚                                               â”‚
â”‚              â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         Mock Procedures (runtime.ts)               â”‚     â”‚
â”‚  â”‚  - math.add                                        â”‚     â”‚
â”‚  â”‚  - math.multiply                                   â”‚     â”‚
â”‚  â”‚  - math.subtract                                   â”‚     â”‚
â”‚  â”‚  - data.fetch                                      â”‚     â”‚
â”‚  â”‚  - data.process                                    â”‚     â”‚
â”‚  â”‚  - data.save                                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

### 1. Workflow Execution Flow

```
User Click
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleExecute()      â”‚ (Client)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Server Action call
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ executeWorkflowActionâ”‚ (Server)
â”‚ - Get workflow def   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ executeWorkflow()    â”‚ (Server)
â”‚ - Start trace        â”‚
â”‚ - Execute nodes      â”‚
â”‚ - Collect spans      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Return result        â”‚ (Serialized)
â”‚ - executionId        â”‚
â”‚ - status             â”‚
â”‚ - outputs            â”‚
â”‚ - spans              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Automatic serialization
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ setExecutionResult() â”‚ (Client)
â”‚ - Update state       â”‚
â”‚ - Trigger re-render  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UI Updates           â”‚
â”‚ - Graph animation    â”‚
â”‚ - Trace visualizationâ”‚
â”‚ - Statistics         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. OpenTelemetry Span Hierarchy

```
workflow.execute (Root Span)
â”‚
â”œâ”€â†’ workflow.node.procedure (Node 1)
â”‚   â””â”€â†’ procedure.math.add
â”‚       â”œâ”€â†’ event: procedure.input
â”‚       â””â”€â†’ event: procedure.output
â”‚
â”œâ”€â†’ workflow.node.procedure (Node 2)
â”‚   â””â”€â†’ procedure.math.multiply
â”‚       â”œâ”€â†’ event: procedure.input
â”‚       â””â”€â†’ event: procedure.output
â”‚
â””â”€â†’ workflow.node.parallel (Node 3)
    â”œâ”€â†’ workflow.parallel.branch (Branch 1)
    â”‚   â””â”€â†’ procedure.task1
    â”œâ”€â†’ workflow.parallel.branch (Branch 2)
    â”‚   â””â”€â†’ procedure.task2
    â””â”€â†’ workflow.parallel.branch (Branch 3)
        â””â”€â†’ procedure.task3
```

## Component Hierarchy

```
RootLayout
  â”‚
  â””â”€â†’ Page (Client Component)
      â”‚
      â”œâ”€â†’ Header
      â”‚   â””â”€â†’ Title & Description
      â”‚
      â”œâ”€â†’ Controls Panel
      â”‚   â”œâ”€â†’ Workflow Selector
      â”‚   â”œâ”€â†’ Execute Button
      â”‚   â””â”€â†’ Execution Status
      â”‚
      â”œâ”€â†’ Tab Navigation
      â”‚   â”œâ”€â†’ Graph Tab Button
      â”‚   â””â”€â†’ Trace Tab Button
      â”‚
      â”œâ”€â†’ Tab Content
      â”‚   â”œâ”€â†’ WorkflowVisualizer (if graph tab)
      â”‚   â”‚   â”œâ”€â†’ ReactFlow
      â”‚   â”‚   â”‚   â”œâ”€â†’ Nodes (auto-generated)
      â”‚   â”‚   â”‚   â”œâ”€â†’ Edges (auto-generated)
      â”‚   â”‚   â”‚   â”œâ”€â†’ Background
      â”‚   â”‚   â”‚   â”œâ”€â†’ Controls
      â”‚   â”‚   â”‚   â”œâ”€â†’ MiniMap
      â”‚   â”‚   â”‚   â””â”€â†’ Panels
      â”‚   â”‚   â”‚       â”œâ”€â†’ Workflow Info
      â”‚   â”‚   â”‚       â””â”€â†’ Execution Stats
      â”‚   â”‚
      â”‚   â””â”€â†’ TraceViewer (if trace tab)
      â”‚       â”œâ”€â†’ Timeline (for each span)
      â”‚       â”œâ”€â†’ Span Details (collapsible)
      â”‚       â””â”€â†’ Summary Stats
      â”‚
      â””â”€â†’ Workflow Details
          â”œâ”€â†’ Information Grid
          â”œâ”€â†’ Node Types Legend
          â””â”€â†’ Node List Table
```

## State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Component State             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  workflows: WorkflowInfo[]          â”‚
â”‚    â†“ (loaded on mount)              â”‚
â”‚  selectedWorkflowId: string         â”‚
â”‚    â†“ (triggers load)                â”‚
â”‚  selectedWorkflow: WorkflowDef      â”‚
â”‚    â†“ (used for visualization)       â”‚
â”‚  executionResult: ExecutionResult   â”‚
â”‚    â†“ (updates after execution)      â”‚
â”‚  isExecuting: boolean               â”‚
â”‚    â†“ (controls UI state)            â”‚
â”‚  activeTab: 'graph' | 'trace'       â”‚
â”‚    â†“ (determines active view)       â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Workflow Node Types

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Workflow Node Types                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚   Procedure     â”‚ Execute a function     â”‚
â”‚  â”‚   ğŸŸ¢ Green      â”‚ with input/output      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚   Condition     â”‚ Branch based on        â”‚
â”‚  â”‚   ğŸŸ¡ Yellow     â”‚ expression result      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚   Parallel      â”‚ Execute multiple       â”‚
â”‚  â”‚   ğŸŸ£ Purple     â”‚ branches at once       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚   Sequential    â”‚ Simple pass-through    â”‚
â”‚  â”‚   ğŸ”µ Blue       â”‚ to next node           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Execution Timeline Example

```
Time â†’
0ms    500ms   1000ms  1500ms  2000ms  2500ms
â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚
â”œâ”€ workflow.execute â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”œâ”€ node: add-numbers â”€â”€â”€â”€â”€â”€â”¤                â”‚
â”‚  â”œâ”€ procedure.math.add â”€â”€â”¤                â”‚
â”‚                           â”‚                â”‚
â”‚                           â”œâ”€ node: multiply â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚  â”œâ”€ procedure.math.mul â”‚
â”‚                                                    â”‚
â”‚                                                    â”œâ”€ node: subtract â”€â”€â”¤
â”‚                                                    â”‚  â”œâ”€ proc.subtract  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Dependencies

```
page.tsx
  â”‚
  â”œâ”€â†’ actions.ts (Server Actions)
  â”‚   â””â”€â†’ runtime.ts
  â”‚       â””â”€â†’ types.ts
  â”‚       â””â”€â†’ examples.ts
  â”‚
  â”œâ”€â†’ WorkflowVisualizer.tsx
  â”‚   â””â”€â†’ @xyflow/react
  â”‚   â””â”€â†’ types.ts
  â”‚
  â””â”€â†’ TraceViewer.tsx
      â””â”€â†’ types.ts
```

## Type Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WorkflowDefinition â”‚ (Input)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ executeWorkflow()  â”‚ (Runtime)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ExecutionResult    â”‚ (Output)
â”‚ - executionId      â”‚
â”‚ - status           â”‚
â”‚ - outputs          â”‚
â”‚ - nodesExecuted    â”‚
â”‚ - spans[]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ React Components   â”‚ (Visualization)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Integration Points

### With Main Project

```
Current (Standalone)              Future (Integrated)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

mockProcedures                    registry.procedures
  â†“                                 â†“
executeWorkflow()        â†’        executeWorkflow()
  â”‚                                 â”‚
  â””â”€ Mock execution                 â””â”€ Real execution
                                    â”‚
                                    â””â”€ Real telemetry export
```

### Extension Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Extension Points               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  1. Custom Procedures                â”‚
â”‚     mockProcedures = {               â”‚
â”‚       "custom.action": async () {}   â”‚
â”‚     }                                â”‚
â”‚                                      â”‚
â”‚  2. Custom Workflows                 â”‚
â”‚     export const myWorkflow = {...}  â”‚
â”‚                                      â”‚
â”‚  3. Custom Node Rendering            â”‚
â”‚     <ReactFlow nodeTypes={...} />    â”‚
â”‚                                      â”‚
â”‚  4. Custom Trace Export              â”‚
â”‚     collector.getSpans()             â”‚
â”‚       â†’ send to backend              â”‚
â”‚                                      â”‚
â”‚  5. Real-time Updates                â”‚
â”‚     WebSocket / Server-Sent Events   â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Performance Profile            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Server Action Overhead: ~10-20ms   â”‚
â”‚  Serialization: ~5-10ms             â”‚
â”‚  Network: ~50-100ms (local)         â”‚
â”‚  Workflow Execution: 500-3000ms     â”‚
â”‚  React Rendering: ~20-50ms          â”‚
â”‚  React Flow Layout: ~50-100ms       â”‚
â”‚                                     â”‚
â”‚  Total: ~650-3300ms per execution   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Security Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Security Layers               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  1. Server Actions                  â”‚
â”‚     - "use server" directive        â”‚
â”‚     - Server-only execution         â”‚
â”‚                                     â”‚
â”‚  2. Input Validation                â”‚
â”‚     - Zod schemas (if added)        â”‚
â”‚     - Type checking                 â”‚
â”‚                                     â”‚
â”‚  3. Rate Limiting (TODO)            â”‚
â”‚     - Per-user limits               â”‚
â”‚     - Per-workflow limits           â”‚
â”‚                                     â”‚
â”‚  4. Authentication (TODO)           â”‚
â”‚     - User verification             â”‚
â”‚     - Access control                â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Architecture

```
Production Deployment
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Vercel / Cloud            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Edge Runtime                       â”‚
â”‚    â””â”€â†’ Static Pages                â”‚
â”‚                                     â”‚
â”‚  Node.js Runtime                    â”‚
â”‚    â”œâ”€â†’ Server Actions               â”‚
â”‚    â”œâ”€â†’ Workflow Execution           â”‚
â”‚    â””â”€â†’ Telemetry Collection         â”‚
â”‚                                     â”‚
â”‚  Database (Optional)                â”‚
â”‚    â””â”€â†’ Execution History            â”‚
â”‚                                     â”‚
â”‚  Telemetry Backend (Optional)       â”‚
â”‚    â”œâ”€â†’ Jaeger                       â”‚
â”‚    â”œâ”€â†’ Zipkin                       â”‚
â”‚    â””â”€â†’ Custom Collector             â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture enables:
- âœ… Clean separation of concerns
- âœ… Type-safe communication
- âœ… Scalable workflow execution
- âœ… Comprehensive observability
- âœ… Easy extensibility
